@page "/AddEmployee"
@inject NavigationManager nav
@inject IJSRuntime js
@inject IEmpService service

<FormControl Heading="Register New Employee" ButtonText="Add New Record" OnSubmit="addNewEmployee" emp="@emp" />

@code {
    private Employee emp = new Employee();

    private async Task addNewEmployee()
    {
        if (await js.InvokeAsync<bool>("confirm", $"Do you really want to add the record?"))
        {
            var response = await service.AddEmployee(emp);
            if (response.IsSuccessStatusCode)
            {
                await js.InvokeVoidAsync("alert", "Employee added successfully!");
                nav.NavigateTo("allEmployees");
            }
            else
            {
                await js.InvokeVoidAsync("alert", "Failed to add employee.");
            }
        }
        else
        {
            await js.InvokeVoidAsync("alert", "User has canceled the operation.");
        }
    }
}
