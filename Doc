<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Expense Manager</title>
    <link rel="stylesheet" href="lib/bootstrap/css/bootstrap.min.css">
    <script src="lib/jquery/jquery.min.js"></script>
    <script>
        const url = "/Expenses/GetAllExpenses";

        function createRow(expense) {
            return `<tr>
                <td>${expense.description}</td>
                <td>${expense.amount}</td>
                <td>${expense.date}</td>
            </tr>`;
        }

        function onGetRecordsSuccess(result) {
            $("table tbody tr").remove();
            result.forEach(expense => {
                const row = createRow(expense);
                $("table tbody").append(row);
            });
        }

        function showRecords() {
            $.get(url, onGetRecordsSuccess);
        }

        function findRecordsByDate() {
            const date = $("#searchDate").val();
            $.get(`/Expenses/GetExpensesByDate?date=${date}`, onGetRecordsSuccess);
        }

        function findRecordsByDescription() {
            const description = $("#searchDescription").val();
            $.get(`/Expenses/GetExpensesByDescription?description=${description}`, onGetRecordsSuccess);
        }

        function findRecordsByMonth() {
            const year = $("#searchYear").val();
            const month = $("#searchMonth").val();
            $.get(`/Expenses/GetExpensesByMonth?year=${year}&month=${month}`, onGetRecordsSuccess);
        }

        function addRecord() {
            const description = $("#addDescription").val();
            const amount = $("#addAmount").val();
            const date = $("#addDate").val();
            const expense = { description, amount, date };

            $.ajax({
                url: "/Expenses/AddExpense",
                type: "POST",
                contentType: "application/json",
                data: JSON.stringify(expense),
                success: function(response) {
                    alert(response);
                    showRecords();
                }
            });
        }

        function init() {
            $("#btnShow").click(showRecords);
            $("#btnFindByDate").click(findRecordsByDate);
            $("#btnFindByDescription").click(findRecordsByDescription);
            $("#btnFindByMonth").click(findRecordsByMonth);
            $("#btnAdd").click(addRecord);
        }

        $(document).ready(init);
    </script>
</head>
<body>
    <nav class="navbar bg-light">
        <button id="btnShow" class="btn btn-info m-4">Show Records</button>
        <input type="date" id="searchDate" class="form-control m-2" placeholder="Search by Date">
        <button id="btnFindByDate" class="btn btn-primary m-4">Find by Date</button>
        <input type="text" id="searchDescription" class="form-control m-2" placeholder="Search by Description">
        <button id="btnFindByDescription" class="btn btn-primary m-4">Find by Description</button>
        <input type="number" id="searchYear" class="form-control m-2" placeholder="Search by Year">
        <input type="number" id="searchMonth" class="form-control m-2" placeholder="Search by Month">
        <button id="btnFindByMonth" class="btn btn-primary m-4">Find by Month</button>
        <input type="text" id="addDescription" class="form-control m-2" placeholder="Add Description">
        <input type="number" id="addAmount" class="form-control m-2" placeholder="Add Amount">
        <input type="date" id="addDate" class="form-control m-2" placeholder="Add Date">
        <button id="btnAdd" class="btn btn-secondary m-4">Add Record</button>
    </nav>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-11">
                <table class="table table-bordered table-striped">
                    <thead>
                        <tr>
                            <th>Description</th>
                            <th>Amount</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div
