using System.IO; // Include this namespace for file operations

[HttpGet("download/{id}")]
public async Task<IActionResult> DownloadDocument(int id)
{
    var claim = await _claimService.GetClaimByIdAsync(id);

    if (claim == null || string.IsNullOrEmpty(claim.DocumentPath))
    {
        return NotFound();
    }

    var filePath = claim.DocumentPath;

    if (!System.IO.File.Exists(filePath))
    {
        return NotFound();
    }

    var fileName = Path.GetFileName(filePath);
    var fileBytes = await System.IO.File.ReadAllBytesAsync(filePath);

    return File(fileBytes, "application/pdf", fileName);  // Change the MIME type if needed
}
